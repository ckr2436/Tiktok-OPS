{
  "title": "Get Spark Ads video recommendations for a TTO account",
  "endpoint": "https://business-api.tiktok.com/open_api/v1.3/spark_ad/recommend/",
  "method": "GET",
  "category_path": [
    "Spark Ads Recommendation"
  ],
  "official_only": true,
  "request": {
    "headers": [
      {
        "name": "Access-Token",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Access token authorized by a TTO Creator Marketplace account. To obtain an access token authorized by a TTO Creator Marketplace account, see Obtain authorization and authentication from your TTO Creator Marketplace account ."
      }
    ],
    "parameters": [
      {
        "name": "tcm_account_id",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "The ID of a TTO Creator Marketplace account. Specify this field if you want to receive Spark Ads recommendations for videos associated with a TTO Creator Marketplace account."
      },
      {
        "name": "video_ids",
        "required": false,
        "type": "array",
        "raw_type": "string[]",
        "description": "If you want to have all video posts associated with your TTO Creator Marketplace account in the past year analyzed, do not pass video_ids and exclude_video_ids . If you want to narrow down the scope of video posts that will be analyzed to generate recommendations, pass either video_ids or exclude_video_ids . The recommendation level ( recommendation_level ) for each video post is relative to the provided video set. Different video sets might result in different recommendation levels for the same video. The ID list of video posts for which you wish to receive recommendations only. Specify the IDs of video posts belonging to TTO campaigns associated with the TTO Creator Marketplace account. To obtain post IDs belonging to TTO campaigns, use /tto/tcm/report/ or /tto/tcm/campaign/ . Max size: 100."
      },
      {
        "name": "exclude_video_ids",
        "required": false,
        "type": "array",
        "raw_type": "string[]",
        "description": "If you want to have all video posts associated with your TTO Creator Marketplace account in the past year analyzed, do not pass video_ids and exclude_video_ids . If you want to narrow down the scope of video posts that will be analyzed to generate recommendations, pass either video_ids or exclude_video_ids . The ID list of video posts for which you don't wish to receive recommendations. Specify the IDs of video posts belonging to TTO campaigns associated with the TTO Creator Marketplace account. To obtain post IDs belonging to TTO campaigns, use /tto/tcm/report/ or /tto/tcm/campaign/ . Max size: 100."
      },
      {
        "name": "time",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "The time when the TikTok video posts were published. Enum values: PAST_ONE_MONTH : In the past one month. PAST_THREE_MONTHS : In the past three months. PAST_SIX_MONTHS : In the past six months. If this field is not passed, all videos published at any time will be analyzed to generate recommendations. Note : If you pass the video_ids and time filters together, the time filter will be ignored. However, you can use exclude_video_ids and time filters together."
      },
      {
        "name": "objective_type",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "The advertising objective for which to generate recommendations. Enum values: REACH : Reach. TRAFFIC : Traffic. VIDEO_VIEWS : Video views. ENGAGEMENT : Community interaction. APP_PROMOTION : App promotion. LEAD_GENERATION : Lead generation. WEB_CONVERSIONS : Website conversions. PRODUCT_SALES : Product sales. If this field is not specified, advertising objectives will not be factored into recommendation results. If you specify this field, you can create a campaign with the same advertising objective ( objective_type ) value by using /campaign/create/ and use the recommended video post in your ads by setting tiktok_item_id to one of the recommended post IDs ( item_id ) in /ad/create/ ."
      }
    ],
    "examples": [
      {
        "title": "Example",
        "curl": "curl --location --request GET 'https://business-api.tiktok.com/open_api/v1.3/spark_ad/recommend/?tcm_account_id={{tcm_account_id}}' \\\n--header 'Access-Token: {{Access-Token}}'"
      }
    ]
  },
  "response": {
    "top_fields": [
      {
        "name": "code",
        "required": false,
        "type": "number",
        "raw_type": "number",
        "description": "Response code. For the complete list of response codes and descriptions, see Appendix-Return Code ."
      },
      {
        "name": "message",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Response message. For details, see Appendix - Return Codes ."
      },
      {
        "name": "request_id",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "The log ID of a request, which uniquely identifies the request."
      },
      {
        "name": "data",
        "required": false,
        "type": "object",
        "raw_type": "object",
        "description": "Returned data."
      }
    ],
    "data": {
      "fields": [
        {
          "name": "videos",
          "required": false,
          "type": "object",
          "raw_type": "object",
          "description": "A list of up to 100 TikTok video posts with their Spark Ads recommendation results."
        },
        {
          "name": "recommendation_level",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "The recommendation level, which indicates the suitability of the video post for Spark Ads. Enum values: HIGH : Highly recommended. MEDIUM : Moderately recommended. LOW : Not recommended."
        },
        {
          "name": "item_id",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "Unique identifier for the TikTok video post. You can pass the value of this field to tiktok_item_id in /ad/create/ to create Spark Ads. To learn more about Spark Ads, see Create Spark Ads . Example: 6995316737801538821 . Updated in: Real-time"
        },
        {
          "name": "creator_handle",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "The handle name of the creator who uploaded the video post. Updated in: Real-time"
        },
        {
          "name": "embed_url",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "An embeddable link for this TikTok video post. Example: https://www.tiktok.com/static/profile-video?id=7202758233486822657&hide_author=1&utm_campaign=tt4d_open_api&utm_source=7220548562860376066 . Updated in: Real-time"
        },
        {
          "name": "thumbnail_url",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "Temporary URL for the video post thumbnail. You need to re-acquire the URL after it expires. The expiration time is included in the URL after the x-expires parameter, in the format of an Epoch/Unix timestamp in seconds. Example: https://p16-sign-va.tiktokcdn.com/tos-maliva-avt-0068/75dec21d63500917fb6ec8bc59415156~c5_300x300.jpeg?x-expires=1614099600&x-signature=PmK%2BWs3LzSzRL2tYs%2FZx7EjG3Gk%3D . Updated in: Real-time"
        },
        {
          "name": "create_time",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "The time when the video post was published, in the format of an Epoch/Unix timestamp in seconds (UTC time). Example: 1628461703 . Updated in: Real-time"
        }
      ],
      "list": {
        "item_fields": []
      }
    },
    "other_tables": [],
    "example": {
      "status_line": "HTTPS/1.1 200 OK",
      "body": "{\n    \"code\": 0,\n    \"message\": \"OK\",\n    \"request_id\": \"{{request_id}}\",\n    \"data\": {\n        \"videos\": [\n            {\n                \"create_time\": \"{{create_time}}\",\n                \"embed_url\": \"{{embed_url}}\",\n                \"handle_name\": \"{{handle_name}}\",\n                \"item_id\": \"{{item_id}}\",\n                \"recommendation_level\": \"HIGH\",\n                \"thumbnail_url\": \"{{thumbnail_url}}\"\n            },\n            ...,\n            {\n                \"create_time\": \"{{create_time}}\",\n                \"embed_url\": \"{{embed_url}}\",\n                \"handle_name\": \"{{handle_name}}\",\n                \"item_id\": \"{{item_id}}\",\n                \"recommendation_level\": \"LOW\",\n                \"thumbnail_url\": \"{{thumbnail_url}}\"\n            }\n        ]\n    }\n}"
    }
  }
}
