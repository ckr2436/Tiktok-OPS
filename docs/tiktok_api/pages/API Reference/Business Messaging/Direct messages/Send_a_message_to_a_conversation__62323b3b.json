{
  "title": "Send a message to a conversation",
  "endpoint": "https://business-api.tiktok.com/open_api/v1.3/business/message/send/",
  "method": "POST",
  "category_path": [
    "Business Messaging",
    "Direct messages"
  ],
  "official_only": true,
  "request": {
    "headers": [
      {
        "name": "Access-Token",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "A short-term access token authorized by the TikTok Business Account owner. For details, see Authentication ."
      },
      {
        "name": "Content-Type",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Request message type. Allowed format: application/json ."
      }
    ],
    "parameters": [
      {
        "name": "business_id",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Application specific unique identifier for the TikTok Business Account. Pass the value of the open_id field returned in the response of /tt_user/oauth2/token/ to this field."
      },
      {
        "name": "recipient_type Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when direct_reply is not specified. Not supported when direct_reply is specified. Currently, the only supported value is CONVERSATION ."
      },
      {
        "name": "recipient Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when direct_reply is not specified. Not supported when direct_reply is specified. When recipient_type is CONVERSATION , you need to specify conversation_id in this field. To get the conversation ID, use /business/message/conversation/list/ ."
      },
      {
        "name": "message_type",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "The type of the message. Enum values: TEXT : text message. IMAGE : image message. SHARE_POST : TikTok post message. TEMPLATE : message template. SENDER_ACTION : Sender action. Note that for this type, the returned message ID is an empty string ( \"\" ) because no actual message is sent."
      },
      {
        "name": "text Conditional",
        "required": true,
        "type": "object",
        "raw_type": "object",
        "description": "Required when message_type is TEXT . Text information. A message cannot include both a text and an image."
      },
      {
        "name": "body Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when text is specified. Text content. Length limit: 6,000 characters, including spaces and emojis."
      },
      {
        "name": "image Conditional",
        "required": true,
        "type": "object",
        "raw_type": "object",
        "description": "Required when message_type is IMAGE . Image information. A message cannot include both a text and an image. Sending and receiving image attachments via API are only available when both the sender and receiver are in countries that support image attachments in direct messages. Image sharing is not available in all markets."
      },
      {
        "name": "media_id Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when image is specified. Image ID. You can use /business/message/capabilities/get/ to query if the Business Account can send a media attachment to a conversation. Before sending an image, use /business/message/media/upload/ to upload an image to your account and obtain the media_id ."
      },
      {
        "name": "share_post Conditional",
        "required": true,
        "type": "object",
        "raw_type": "object",
        "description": "Required when message_type is SHARE_POST . Information about the post to be shared."
      },
      {
        "name": "item_id Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when share_post is specified. The ID of the TikTok post to share with others. To obtain the IDs of TikTok posts associated with your TikTok account, use /business/video/list/ . Note : Currently, you can only share your posts."
      },
      {
        "name": "template Conditional",
        "required": true,
        "type": "object",
        "raw_type": "object",
        "description": "Required when message_type is TEMPLATE . Details about the message template to send."
      },
      {
        "name": "type Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when template is specified. The type of message template. Enum values: QA_BUTTON_CARD : Q&A button card, a card showing a question and buttons that represent answers. When users click one of the buttons, the text content of the button will be sent to the conversation thread on behalf of the user as an answer to the pre-set question on the card. QA_LINK_CARD : Q&A text link card, a card showing a question and interactive text links that represent answers to the question. When users click one of the text links, the text content of the text link will be sent to the conversation thread on behalf of the user as an answer to the pre-set question on the card."
      },
      {
        "name": "title Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when template is specified. The pre-set question on the card. Length limit: 40 characters."
      },
      {
        "name": "buttons Conditional",
        "required": true,
        "type": "array",
        "raw_type": "object[]",
        "description": "Required when template is specified. A list of buttons or text links that represent answers to the question on the card. Size range: 1-3."
      },
      {
        "name": "type Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when buttons is specified. The type of the button or text link. Enum value: REPLY : Reply button or reply text link. When users click the button or text link, the system will send the text content of the button or text link as a reply message on behalf of the user in the conversation."
      },
      {
        "name": "title Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when buttons is specified. The text content of the button or text link. Length limit: When type of the message template is QA_BUTTON_CARD : 20 characters. When type of the message template is QA_LINK_CARD : 40 characters."
      },
      {
        "name": "id",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "A self-defined ID for the button or text link. You can use this ID to distinguish between different buttons and text links. Length limit: 40 characters."
      },
      {
        "name": "sender_action Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when message_type is SENDER_ACTION . The sender's action in the messaging session. TYPING : The sender is preparing a reply. This displays a “Typing” icon in the messaging window, which will automatically disappear after five seconds. MARK_READ : The sender marks all messages in the session as read, displaying a “Seen” icon for those messages."
      },
      {
        "name": "referenced_message_info Conditional",
        "required": true,
        "type": "object",
        "raw_type": "object",
        "description": "Required when you want to send a reply to a message. Information about the original message to reply to."
      },
      {
        "name": "referenced_message_id Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when referenced_message_info is specified. The ID of the original message that you want to reply to. The original message can be a text, an image, or a TikTok post. To obtain such a message, use /business/message/content/list/ and ensure the message_type of the message is TEXT , IMAGE , or SHARE_POST . When using this field, make sure to set the message_type to TEXT and specify text simultaneously, as only text replies are supported. After you send the reply, the original message will be quoted in the conversation thread."
      },
      {
        "name": "direct_reply Conditional",
        "required": true,
        "type": "object",
        "raw_type": "object",
        "description": "Required when you are sending a direct reply. Details of the direct reply. Note : To send a direct reply, ensure that Comment-to-Message is enabled for the Business Account. To obtain the Comment-to-Message setting for a Business Account, use /business/message/direct_reply/get/ . The Comment-to-Message feature is only available for Business Accounts registered in Vietnam, Indonesia, and Thailand. Once you enable Comment-to-Message for a Business Account, the Business Account can only reply to comments published by TikTok accounts that are registered in the APAC, LATAM, and METAP regions."
      },
      {
        "name": "reply_type Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when direct_reply is specified. The type of direct reply. Enum value: COMMENT_REPLY : a reply to a comment on a video. Note : To send a comment reply, ensure that all the following conditions are all met: The comment that you want to reply to is a first-level comment on a video of the Business Account. Your reply is sent within 48 hours after the user posted the comment. The comment has not been replied to through direct messages yet in any way, including from the TikTok app or via the API. The user who posted the comment had no direct messaging communication with the Business Account in the past 24 hours. The user who posted the comment is over 18 years old."
      },
      {
        "name": "comment_reply Conditional",
        "required": true,
        "type": "object",
        "raw_type": "object",
        "description": "Required when direct_reply is specified. Details of the comment reply."
      },
      {
        "name": "comment_id Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Required when direct_reply is specified. ID of the high-intent comment you want to reply to. A high-intent comment is one that expresses a strong intention to purchase or seek further information. You can obtain the ID of a high-intent comment from the webhook event im_receive_high_intent_comment ."
      }
    ],
    "examples": [
      {
        "title": "Send a text message",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"TEXT\",\n    \"text\": {\n        \"body\": \"{{body}}\"\n    }\n}'"
      },
      {
        "title": "Send an image message",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"IMAGE\",\n    \"image\": {\n        \"media_id\": \"{{media_id}}\"\n    }\n}'"
      },
      {
        "title": "Send a Share Post message",
        "curl": "curl --location --request POST'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"SHARE_POST\",\n    \"share_post\": {\n        \"item_id\": \"{{item_id}}\"\n    }\n}'"
      },
      {
        "title": "Send a Q&A button card",
        "curl": "curl --location  --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"TEMPLATE\",\n    \"template\": {\n        \"type\": \"QA_BUTTON_CARD\",\n        \"title\": \"{{title}}\",\n        \"buttons\": [\n            {\n                \"type\": \"REPLY\",\n                \"title\": \"{{title}}\",\n                \"id\": \"{{id}}\"\n            },\n            {\n                \"type\": \"REPLY\",\n                \"title\": \"{{title}}\",\n                \"id\": \"{{id}}\"\n            },\n            {\n                \"type\": \"REPLY\",\n                \"title\": \"{{title}}\",\n                \"id\": \"{{id}}\"\n            }          \n        ]\n    }\n}'"
      },
      {
        "title": "Send a Q&A text link card",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"TEMPLATE\",\n    \"template\": {\n        \"type\": \"QA_LINK_CARD\",\n        \"title\": \"{{title}}\",\n        \"buttons\": [\n            {\n                \"type\": \"REPLY\",\n                \"title\": \"{{title}}\",\n                \"id\": \"{{id}}\"\n            },\n            {\n                \"type\": \"REPLY\",\n                \"title\": \"{{title}}\",\n                \"id\": \"{{id}}\"\n            },\n            {\n                \"type\": \"REPLY\",\n                \"title\": \"{{title}}\",\n                \"id\": \"{{id}}\"\n            }          \n        ]\n    }\n}'"
      },
      {
        "title": "Send a typing action",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"SENDER_ACTION\",\n    \"sender_action\": \"TYPING\"\n}'"
      },
      {
        "title": "Send a mark-as-read action",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"SENDER_ACTION\",\n    \"sender_action\": \"MARK_READ\"\n}'"
      },
      {
        "title": "Send a text reply to a message",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"recipient_type\": \"CONVERSATION\",\n    \"recipient\": \"{{recipient}}\",\n    \"message_type\": \"TEXT\",\n    \"text\": {\n        \"body\": \"{{body}}\"\n    },\n    \"referenced_message_info\":{\n        \"referenced_message_id\":\"{{referenced_message_id}}\"       \n    }\n}'"
      },
      {
        "title": "Send a text reply to a high-intent comment",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/business/message/send/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"business_id\": \"{{business_id}}\",\n    \"direct_reply\": {\n        \"reply_type\":\"COMMENT_REPLY\",\n        \"comment_reply\":{\n            \"comment_id\":\"{{comment_id}}\",\n        }\n    },\n    \"message_type\": \"TEXT\",\n    \"text\": {\n        \"body\": \"{{body}}\"\n    }\n}'"
      }
    ]
  },
  "response": {
    "example": {
      "status_line": "HTTPS/1.1 200 OK",
      "body": "{\n    \"code\": 0,\n    \"message\": \"OK\",\n    \"request_id\": \"{{request_id}}\",\n    \"data\": {\n        \"message\": {\n            \"message_id\": \"{{message_id}}\"\n        }\n    }\n}"
    }
  }
}