{
  "title": "Create an asynchronous report task",
  "endpoint": "https://business-api.tiktok.com/open_api/v1.3/report/task/create/",
  "method": "POST",
  "category_path": [
    "Reporting"
  ],
  "official_only": true,
  "request": {
    "headers": [
      {
        "name": "Access-Token",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Authorized access token. For details, see Authentication ."
      }
    ],
    "parameters": [
      {
        "name": "advertiser_id Conditional",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Either advertiser_id or advertiser_ids has to be set. If you pass in both advertiser_id and advertiser_ids , advertiser_id will be ignored. Advertiser ID."
      },
      {
        "name": "advertiser_ids Conditional",
        "required": false,
        "type": "array",
        "raw_type": "string[]",
        "description": "Either advertiser_id or advertiser_ids has to be set. If you pass in both advertiser_id and advertiser_ids , advertiser_id will be ignored. A list of advertiser IDs. Max size: 5. Note : This field is only valid when report_type is BASIC or AUDIENCE . The advertisers specified in advertiser_ids should all belong to the same TikTok for Business user. Otherwise, an error will occur. Use /oauth2/advertiser/get/ to retrieve a list of advertiser IDs that belong to the same TikTok for Business user. If you specify start_date and end_date at the same time, the data will be pulled according to the timezone of each ad account. When you pass multiple advertiser IDs, you can specify up to two ID dimensions ( advertiser_id + another ID dimension) in dimensions. However, many metrics do not support the advertiser_id dimension. Also, it's recommended that you include currency in metrics , because the ad accounts may have different currencies."
      },
      {
        "name": "service_type",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Ad service type. Enum values: AUCTION : auction ads, or both auction ads and reservation ads. RESERVATION ( deprecated ) : reservation ads. Default value: AUCTION . Note : To retrieve the reporting data of TopView ads, use the basic reports or audience reports and specify the value RESERVATION_TOP_VIEW for the buying_type filter ."
      },
      {
        "name": "report_type",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Report type. Enum values: BASIC (basic report), AUDIENCE (audience report), PLAYABLE_MATERIAL (playable ads report), CATALOG (DSA report). When service_type is AUCTION , BASIC , AUDIENCE , PLAYABLE_MATERIAL , and CATALOG reports are all supported."
      },
      {
        "name": "data_level Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "The data level that you'd like to query in reports. Required when report_type is BASIC , AUDIENCE or CATALOG . Enum values: AUCTION_AD : auction ads or both auction ads and reservation ads, ad level. AUCTION_ADGROUP : auction ads or both auction ads and reservation ads, ad group level. AUCTION_CAMPAIGN : auction ads or both auction ads and reservation ads, campaign level. AUCTION_ADVERTISER : auction ads or both auction ads and reservation ads, advertiser level. RESERVATION_AD ( deprecated ): reservation ads, ad level. RESERVATION_ADGROUP ( deprecated ): reservation ads, ad group level. RESERVATION_CAMPAIGN ( deprecated ): reservation ads, campaign level. RESERVATION_ADVERTISER ( deprecated ): reservation ads, advertiser level."
      },
      {
        "name": "dimensions",
        "required": true,
        "type": "array",
        "raw_type": "string[]",
        "description": "Grouping conditions. For example: [\"campaign_id\", \"stat_time_day\"] indicates that both campaign_id and stat_time_day (days) are grouped. Different report types support different dimensions. Supported dimensions in basic reports Supported dimensions in audience reports Supported dimensions in playable ad reports Supported dimensions in DSA reports Supported dimensions in Business Center reports Note : Different report types support different dimensions. For supported dimensions for each report type, see the corresponding articles under Report types . If your query dimensions contain more than xx_id and there is no ads reporting within the query time range, an empty list will be returned. The dimension and metric combinations that are supported may vary between synchronous and asynchronous reports. Therefore, a valid dimension and metric combination in synchronous reports may not be supported in asynchronous reports."
      },
      {
        "name": "metrics",
        "required": false,
        "type": "array",
        "raw_type": "string[]",
        "description": "Metrics to query. Different report types support different metrics. For supported metrics for each report type, see the corresponding articles under Report types . Default value: [\"spend\", \"impressions\"] ."
      },
      {
        "name": "start_date Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "This field is required when query_lifetime is false or not specified. Query start date (closed interval) in the format of YYYY-MM-DD . The date is based on the ad account time zone. Note : Asynchronous reports have no time range limitations."
      },
      {
        "name": "end_date Conditional",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "This field is required when query_lifetime is false or not specified. Query end date (closed interval) in the format of YYYY-MM-DD . The date is based on the ad account time zone. Note : Asynchronous reports have no time range limitations."
      },
      {
        "name": "query_lifetime",
        "required": false,
        "type": "boolean",
        "raw_type": "boolean",
        "description": "Whether to request the lifetime metrics. Default value: false . If query_lifetime = true , the start_date and end_date parameters will be ignored. The lifetime metric name is the same as the normal one. Note : Breakdown by time or audience is not supported when querying for lifetime metrics. Breakdown by location code ( country_code ) is not supported when querying for lifetime metrics. DSA reports do not support lifetime metrics. Besides, Audience reports do not support lifetime metrics at the time, and will support lifetime metrics in the first half of 2023."
      },
      {
        "name": "order_field",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Sorting field. All supported metrics (excluding attribute metrics) support sorting. Not sorting by default."
      },
      {
        "name": "order_type",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Sorting order. Enum values: ASC , DESC . Default value: DESC ."
      },
      {
        "name": "enable_report_title_translation",
        "required": false,
        "type": "boolean",
        "raw_type": "boolean",
        "description": "Whether to enable the translation of the title row of the asynchronous report (including dimension names and metric names). For instance, if this field is set to false , a report title can be ad_id (untranslated title) rather than AD ID (translated title). Default value: true . Note : This field is only valid when report_type is BASIC or AUDIENCE . Starting November 15th, 2024, the translation of certain metrics in the title row of async reports will be updated to provide a better user experience. This change will not affect the metric field names themselves. To minimize potential disruptions, we strongly recommend setting enable_report_title_translation to false in your code. This will eliminate dependencies on metric translations, which are subject to periodic updates. While these translations are provided to help map metrics to their corresponding names in TikTok Ads Manager, relying on them in your code may lead to breaking changes in the future. By disabling title row translation, you can ensure more stable and predictable behavior in your integration."
      },
      {
        "name": "output_format",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Format of output. Enum values: CSV_STRING , CSV_DOWNLOAD , XLSX_DOWNLOAD . Default value: CSV_STRING ."
      },
      {
        "name": "file_name",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Customized download file name, which is optional to pass when output_format is CSV_DOWNLOAD or XLSX_DOWNLOAD . The maximum length is 255 characters. The file name needs to exclude the following special characters: ['/', '\\t', '\\b', '@', '#', '$', '%', '^', '&', '*', '(', ')', '[', ']']."
      },
      {
        "name": "filtering",
        "required": false,
        "type": "array",
        "raw_type": "object[]",
        "description": "Filtering conditions. Supported filtering conditions vary based on service_type and data_level . For filters supported in different report types, refer to the articles under Report types . Note : When you pass in filtering , please make sure you specify the fields field_name , filter_type , and filter_value at the same time as an object in a list. If you want to use country_code as your grouping filter, then please specify country_code in the dimensions field of the request. Note that country_code works with basic report (sync and async), audience report (sync and async), and playable ad report (sync only). In asynchronous mode for the report types of basic reports, audience reports, and DSA reports, the only supported filter fields are campaign_ids , adgroup_ids , and ad_ids ."
      },
      {
        "name": "field_name",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Filter field name."
      },
      {
        "name": "filter_type",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Filter type. Enum values: IN : Contains. When the filter type is this item, the filtered value needs to be a valid JSON array character string. MATCH : Fuzzy matching, equivalent to like operations in MySQL. GREATER_EQUAL : Greater than or equal to. GREATER_THAN : Greater than. LOWER_EQUAL : Less than or equal to. LOWER_THAN : Less than. BETWEEN : Between. When the filter type is this item, the filtered value needs to be a valid JSON array of 2-element string."
      },
      {
        "name": "filter_value",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "The value to filter. When filter_type is IN , filter_value needs to be a valid JSON array character string."
      }
    ],
    "examples": [
      {
        "title": "Example",
        "curl": "curl --location --request POST 'https://business-api.tiktok.com/open_api/v1.3/report/task/create/' \\\n--header 'Access-Token: {{access-token}}' \\\n--data-raw '{\n    \"advertiser_id\": \"{{advertiser_id}}\",\n    \"data_level\":\"AUCTION_AD\",\n    \"report_type\":\"BASIC\",\n    \"dimensions\": [\"ad_id\"],\n    \"metrics\": [\"clicks\"],\n    \"start_date\": \"{{start_date}}\",\n    \"end_date\": \"{{end_date}}\",\n    \"output_format\": \"CSV_DOWNLOAD\",\n    \"file_name\": \"{{file_name}}\",\n    \"filtering\": [\n        {\n        \"field_name\":\"ad_ids\",\n        \"filter_type\":\"IN\",\n        \"filter_value\": \"[\\\"{{ad_id}}\\\",\\\"{{ad_id}}\\\"]\"\n        }\n    ]\n}'"
      }
    ]
  },
  "response": {
    "top_fields": [
      {
        "name": "code",
        "required": false,
        "type": "number",
        "raw_type": "number",
        "description": "The response code. For the complete list of response codes and descriptions, see Appendix - Return Codes ."
      },
      {
        "name": "message",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "The response message. For details, see Appendix - Return Codes ."
      },
      {
        "name": "data",
        "required": false,
        "type": "object",
        "raw_type": "object",
        "description": "The returned data."
      }
    ],
    "data": {
      "fields": [
        {
          "name": "task_id",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "The ID of the asynchronous report task."
        },
        {
          "name": "request_id",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "The unique ID of the request."
        }
      ],
      "list": {
        "item_fields": []
      }
    },
    "other_tables": [],
    "example": {
      "status_line": "HTTPS/1.1 200 OK",
      "body": "{\n    \"message\": \"OK\",\n    \"code\": 0,\n    \"data\": {\n        \"task_id\": \"{{task_id}}\"\n    },\n    \"request_id\": \"{{request_id}}\"\n}"
    }
  }
}
