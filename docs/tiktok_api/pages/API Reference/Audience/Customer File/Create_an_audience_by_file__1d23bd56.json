{
  "title": "Create an audience by file",
  "endpoint": "https://business-api.tiktok.com/open_api/v1.3/dmp/custom_audience/create/",
  "method": "POST",
  "category_path": [
    "Audience",
    "Customer File"
  ],
  "official_only": true,
  "request": {
    "headers": [
      {
        "name": "Access-Token",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Authorized access token. For details, see Authentication ."
      },
      {
        "name": "Content-Type",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Request message type. Allowed format: \"application/json\" ."
      }
    ],
    "parameters": [
      {
        "name": "advertiser_id",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Advertiser ID."
      },
      {
        "name": "custom_audience_name",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Audience name. Maximum of 128 characters."
      },
      {
        "name": "audience_sub_type",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Audience sub type, indicating the type of ads that the audience can be used. Enum values: NORMAL Normal audience. It can be used in non-R&F ads. REACH_FREQUENCY : Audience for Reach & Frequency. It can only be used in R&F ads. Default: NORMAL ."
      },
      {
        "name": "file_paths",
        "required": true,
        "type": "array",
        "raw_type": "string[]",
        "description": "List of file paths. The recommended size is <50 to ensure a stable request. You can use /dmp/custom_audience/update/ to append more data files to the audience. You get the file_path in response after you upload your file calling Upload audience files endpoint."
      },
      {
        "name": "calculate_type",
        "required": true,
        "type": "string",
        "raw_type": "string",
        "description": "Encryption type. calculate_type should be the same as all the files in the file_path , or you will not get a audience id or get an invalid audience id. For enum values, see Enumeration - Encryption Type ."
      },
      {
        "name": "retention_in_days",
        "required": false,
        "type": "integer",
        "raw_type": "integer",
        "description": "Number of days to retain the audience. Value range: [1, 365]. Note : If this field is passed, the expiration date will be the specified number of retention days from the date when the audience was created. Any operations to the audience CANNOT reset the expiration date. If this field is not passed, the expiration date will be 365 days from the last time the audience was applied to an active ad group or modified. Applying the audience to an active ad group or modifying the audience will reset the expiration date. To learn about the actions that will reset the expiration date, refer to the Help Center article Audience Expiration Policy ."
      }
    ],
    "examples": [
      {
        "title": "Example",
        "curl": "curl --location --request POST 'https://ads.tiktok.com/open_api/v1.3/dmp/custom_audience/create/' \\\n--header 'Access-Token: {{Access-Token}}' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    \"advertiser_id\": \"{{advertiser_id}}\",\n    \"custom_audience_name\": \"test_new\",\n    \"file_paths\": [\"{{file_paths}}\"],\n    \"calculate_type\": \"{{calculate_type}}\"\n}'"
      }
    ]
  },
  "response": {
    "top_fields": [
      {
        "name": "code",
        "required": false,
        "type": "number",
        "raw_type": "number",
        "description": "Return code, see Appendix-Return Codes ."
      },
      {
        "name": "message",
        "required": false,
        "type": "string",
        "raw_type": "string",
        "description": "Return message, see Appendix-Return Codes ."
      },
      {
        "name": "data",
        "required": false,
        "type": "object",
        "raw_type": "object",
        "description": "Returned Data."
      }
    ],
    "data": {
      "fields": [
        {
          "name": "custom_audience_id",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "Custom audience ID."
        },
        {
          "name": "request_id",
          "required": false,
          "type": "string",
          "raw_type": "string",
          "description": "The log id of a request, which uniquely identifies the request."
        }
      ],
      "list": {
        "item_fields": []
      }
    },
    "other_tables": [],
    "example": {
      "status_line": "HTTPS/1.1 200 OK",
      "body": {
        "message": "OK",
        "code": 0,
        "data": {
          "custom_audience_id": "123"
        }
      }
    }
  }
}
