/* =========================================================
   GMV · 全局样式（移动端修正版 · 完整版）
   - 桌面端：固定侧边栏 + 内容区内部滚动
   - 移动端(≤960px)：整页滚动，避免内容被页脚“压住”
   - 视口高度：仅桌面端使用 100svh/100dvh/100vh（防止覆盖移动端）
   - 适配安全区（刘海/底部手势）
   ========================================================= */

/* ===== 变量 ===== */
:root{
  --bg:#0f1722; --panel:#121a27; --panel-2:#0c1420; --border:#233044;
  --muted:#a3b1c2; --txt:#dbe7ff; --txt-2:#cfe0ff;
  --accent:#6ea8fe; --accent-2:#91caff;
  --danger:#ff7676; --ok:#22c55e; --warn:#f59e0b;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --shadow-lg:0 16px 40px rgba(0,0,0,.45);

  --sidebar-hover: rgba(255,255,255,.06);
  --sidebar-active: #0c1220;
  --sidebar-group-bg: rgba(255,255,255,.03);
  --sidebar-group-border: var(--border);
  --sidebar-group-text: var(--txt-2);

  --sidebar-w: 216px;
  --footer-h: 48px;
  --topbar-h: 56px;

  /* 安全区变量（默认 0） */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);
  --safe-right: env(safe-area-inset-right, 0px);

  /* 触控命中与字体 */
  --tap-min: 44px;
  --fz-base: clamp(13px, 2.6vw, 14px);
  --fz-small: clamp(11px, 2.2vw, 12px);
}

*{ box-sizing: border-box; }
html, body, #root{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--txt);
  font:14px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans SC","PingFang SC","Noto Sans SC",sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  font-size: var(--fz-base);
}
a{ color:var(--accent); text-decoration:none; }
a:hover{ opacity:.95; }

/* ===== 浅色主题（显式） ===== */
:root[data-theme="light"]{
  --bg:#f4f6fb; --panel:#fff; --panel-2:#f8fafc; --border:#e6eaf2;
  --txt:#111827; --txt-2:#1f2937; --muted:#667085;
  --accent:#2563eb; --accent-2:#1d4ed8; --danger:#e11d48; --ok:#16a34a; --warn:#d97706;
  --shadow:0 8px 24px rgba(15, 23, 42, .08);
  --shadow-lg:0 16px 40px rgba(15, 23, 42, .12);
  --sidebar-hover: rgba(0,0,0,.04); --sidebar-active:#eef2ff;
  --sidebar-group-bg:#fff; --sidebar-group-border:#e6eaf2; --sidebar-group-text:#1f2937;
}

/* ===== 系统跟随（未显式设置 data-theme 时） ===== */
@media (prefers-color-scheme: light){
  :root:not([data-theme]) {
    --bg:#f4f6fb; --panel:#fff; --panel-2:#f8fafc; --border:#e6eaf2;
    --txt:#111827; --txt-2:#1f2937; --muted:#667085;
    --accent:#2563eb; --accent-2:#1d4ed8; --danger:#e11d48; --ok:#16a34a; --warn:#d97706;
    --shadow:0 8px 24px rgba(15, 23, 42, .08); --shadow-lg:0 16px 40px rgba(15, 23, 42, .12);
    --sidebar-hover: rgba(0,0,0,.04); --sidebar-active:#eef2ff;
    --sidebar-group-bg:#fff; --sidebar-group-border:#e6eaf2; --sidebar-group-text:#1f2937;
  }
}

/* ===== 布局：顶栏 / 侧边栏 / 内容 / 页脚 ===== */
.shell{ min-height:100vh; display:flex; flex-direction:column; }

.topbar{
  height:var(--topbar-h); position:sticky; top:0; z-index:100;
  display:flex; align-items:center; justify-content:space-between;
  padding:0 calc(16px + var(--safe-right)) 0 calc(16px + var(--safe-left));
  background:var(--panel); border-bottom:1px solid var(--border);
}
.brand{ display:flex; align-items:center; gap:10px; }
.logo{ display:inline-grid; place-items:center; width:28px; height:28px; background:#1b2330; border:1px solid var(--border); border-radius:8px; color:#9cc0ff; font-weight:700; }
.brand-name{ font-weight:600; color:var(--txt); }
.top-actions{ display:flex; align-items:center; gap:10px; }
.api-health{ display:inline-flex; align-items:center; gap:6px; padding:3px 10px; border-radius:999px; border:1px solid var(--border); background:var(--panel); font-size:12px; font-weight:500; color:var(--muted); line-height:1; min-height:26px; }
.api-health__dot{ width:8px; height:8px; border-radius:50%; background:var(--muted); box-shadow:0 0 0 2px rgba(148,163,184,.25); }
.api-health__text{ display:inline-block; }
.api-health--online{ border-color:rgba(34,197,94,.35); background:rgba(34,197,94,.12); color:#15803d; }
.api-health--online .api-health__dot{ background:#16a34a; box-shadow:0 0 0 2px rgba(74,222,128,.32); }
.api-health--offline{ border-color:rgba(248,113,113,.35); background:rgba(248,113,113,.12); color:#b91c1c; }
.api-health--offline .api-health__dot{ background:#ef4444; box-shadow:0 0 0 2px rgba(252,165,165,.32); }
.api-health--loading{ border-style:dashed; opacity:.85; }
.api-health--loading .api-health__dot{ animation:api-health-pulse 1.4s ease-in-out infinite; }

@keyframes api-health-pulse{
  0%{ opacity:.4; }
  50%{ opacity:1; }
  100%{ opacity:.4; }
}

/* 主体：默认预留侧边栏宽度（桌面端） */
.layout{
  display:block;
  height: calc(100vh - var(--topbar-h) - var(--footer-h));
  min-height:0;
  padding-left: var(--sidebar-w);
}

/* 侧边栏：桌面端 fixed + 自身滚动 */
.sidebar{
  position: fixed;
  top:var(--topbar-h); left:0;
  width: var(--sidebar-w);
  height: calc(100vh - var(--topbar-h) - var(--footer-h));
  border-right:1px solid var(--border);
  background:var(--panel);
  padding:12px 10px;
  overflow: auto;
}

/* 内容区：内部滚动（桌面端） */
.content{
  height: 100%;
  padding:16px 18px;
  overflow: auto;
}
.content.no-scroll{ overflow: hidden; }

/* 页脚：普通文流即可，避免 fixed 覆盖内容 */
.footer{
  min-height: var(--footer-h);
  border-top:1px solid var(--border);
  background:var(--panel);
  display:flex; align-items:center; gap:12px; padding:10px calc(16px + var(--safe-right)) 10px calc(16px + var(--safe-left));
  color:var(--muted);
}

/* ===== 侧边栏分组与链接 ===== */
.sidebar-group{ margin:0 0 12px 0; border:1px solid var(--sidebar-group-border); border-radius:12px; background:var(--sidebar-group-bg); }
.sidebar-group__title{ width:100%; display:flex; align-items:center; justify-content:space-between; padding:10px 12px; background:transparent; border:none; color:var(--sidebar-group-text); font-weight:700; cursor:pointer; border-radius:12px 12px 0 0; }
.sidebar-group__title:hover{ background: var(--sidebar-hover); }
.sidebar-group__text{ font-size:13px; }
.sidebar-group__caret{ transition: transform .18s ease, opacity .2s; opacity:.8; }
.sidebar-links{ display:grid; gap:6px; padding:8px 6px 10px 10px; border-top:1px dashed var(--sidebar-group-border); }
.sidebar-group.collapsed .sidebar-links{ display:none; }
.sidebar-group.collapsed .sidebar-group__caret{ transform: rotate(-90deg); }

.sidebar-link{
  position:relative; display:flex; align-items:center; gap:8px;
  padding:8px 10px 8px 14px;
  border-radius:10px; color:var(--txt); font-weight:500;
  min-height: var(--tap-min);
}
.sidebar-link:hover{ background:var(--sidebar-hover); }
.sidebar-link.active{ background:var(--sidebar-active); color:#111; }
@media (prefers-color-scheme: dark){ .sidebar-link.active{ color:#fff } }
.sidebar-link .link-dot{ width:6px; height:6px; border-radius:50%; background:currentColor; opacity:.45; margin-left:2px; }
.sidebar-link.active .link-dot{ opacity:1; }
.sidebar-link.active::before{ content:""; position:absolute; left:-8px; top:6px; bottom:6px; width:3px; border-radius:2px; background:linear-gradient(180deg, var(--accent), var(--accent-2)); }
.sidebar-link__label{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* ===== 基础组件 ===== */
.card{ background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:14px 16px; box-shadow:var(--shadow); }
.card--elevated{ box-shadow:var(--shadow-lg); }
.form{ display:grid; gap:.75rem; }
.form-field{ display:grid; gap:.5rem; }
.form-field__label{ font-size:.9rem; color:var(--muted); }
.form-field__control input, .input{
  width:100%; padding:.6rem .7rem; border-radius:.5rem;
  border:1px solid var(--border); background:var(--panel-2); color:inherit;
}
.form-label{ display:block; font-size:.85rem; margin-bottom:4px; color:var(--muted); }
.form-input{ width:100%; padding:.6rem .7rem; border-radius:.6rem; border:1px solid var(--border); background:var(--panel-2); color:inherit; }
.form-input:focus{ outline:2px solid var(--accent); outline-offset:1px; }

/* ====== 输入框带图标按钮（修复小眼睛位置） ====== */
.input-wrap{ position:relative; display:flex; align-items:center; }
.input-wrap > .input{ padding-right: 46px; } /* 预留按钮空间，避免文字被遮挡 */
.eye-btn{
  position:absolute; right:8px; top:50%; transform:translateY(-50%);
  width:36px; height:36px; display:grid; place-items:center;
  background:transparent; border:none; cursor:pointer;
  color:var(--muted); border-radius:8px;
}
.eye-btn:hover{ background:var(--sidebar-hover); color:var(--txt); }
.eye-btn:focus-visible{ outline:2px solid var(--accent); outline-offset:2px; }

/* 警告/按钮等 */
.alert{ padding:.6rem .75rem; border-radius:.5rem; border:1px solid var(--border); }
.alert--error{ border-color:#ef4444; }
.alert--success{ border-color:var(--ok); background:rgba(34,197,94,.12); color:var(--ok); }
.actions{ display:flex; gap:.75rem; justify-content:flex-end; }
.btn{ background:#3b82f6; border:none; color:#fff; border-radius:10px; padding:8px 14px; cursor:pointer; min-height: var(--tap-min); }
.btn:hover{ opacity:.95; }
.btn[disabled]{ opacity:.6; cursor:not-allowed; }
.btn.ghost{ background:transparent; color:var(--txt); border:1px solid var(--border); }
.btn.ghost:hover{ background:var(--sidebar-hover); }

/* Modal */
.modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:flex; align-items:center; justify-content:center; z-index:1100; }
.modal{ width:min(760px, 92vw); background:var(--panel); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow-lg); color:var(--txt); }
.modal__header{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--border); }
.modal__title{ font-weight:700; }
.modal__close{ background:transparent; border:1px solid var(--border); border-radius:8px; padding:4px 8px; color:var(--txt); cursor:pointer; }
.modal__body{ padding:14px; max-height:66vh; overflow:auto; }

/* 用户菜单 */
.user-menu{ position:relative; z-index:105; }
.user-btn{ display:flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); color:var(--txt); cursor:pointer; }
.avatar{ width:24px; height:24px; border-radius:50%; display:grid; place-items:center; font-weight:600; background:linear-gradient(135deg,#4f8cff,#7c5cff); color:#fff; font-size:12px; }
.user-email{ font-size:13px; opacity:.9; max-width:180px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.chev{ opacity:.7; }
.user-menu .menu{ position:absolute; right:0; top:calc(100% + 8px); min-width:240px; background:var(--panel); border:1px solid var(--border); box-shadow:var(--shadow-lg); border-radius:14px; padding:10px; display:none; color:var(--txt); }
.user-menu.open .menu{ display:block; animation:m-pop .12s ease-out; }

/* ===== GMV Max 页面 ===== */
.page-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
.page-header h1, .page-header h2, .page-header h3{ margin:0; }
.page-header p{ margin:4px 0 0 0; color:var(--muted); }
.gmvmax-page{ display:flex; flex-direction:column; gap:24px; }
.gmvmax-page__header{ display:flex; align-items:flex-start; justify-content:space-between; gap:16px; flex-wrap:wrap; }
.gmvmax-page__header h1{ margin:0; }
.gmvmax-page__subtitle{ margin:6px 0 0; color:var(--muted); max-width:520px; }
.gmvmax-provider-badge{ display:inline-flex; align-items:center; gap:6px; padding:6px 12px; border-radius:999px; border:1px solid var(--border); background:var(--panel-2); font-weight:600; color:var(--muted); }
.gmvmax-card{ background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:20px; box-shadow:var(--shadow); display:flex; flex-direction:column; gap:16px; }
.gmvmax-card__header{ display:flex; align-items:flex-start; justify-content:space-between; gap:16px; flex-wrap:wrap; }
.gmvmax-card__header h2{ margin:0; font-size:1.15rem; }
.gmvmax-card__header p{ margin:4px 0 0; color:var(--muted); }
.gmvmax-card__body{ display:flex; flex-direction:column; gap:16px; }
.gmvmax-card__footer{ display:flex; align-items:center; gap:16px; flex-wrap:wrap; }
.gmvmax-field-grid{ display:grid; gap:16px; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); }
.gmvmax-presets-row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
.gmvmax-presets-row select, .gmvmax-presets-row input{ flex:1 1 220px; min-width:180px; }
.gmvmax-presets-row .gmvmax-button{ flex:0 0 auto; }
.gmvmax-subtext{ margin:4px 0 0; color:var(--muted); }
.gmvmax-placeholder{ margin:0; padding:12px 16px; border-radius:12px; border:1px dashed var(--border); background:var(--panel-2); color:var(--muted); }
.gmvmax-inline-error{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 12px; border-radius:12px; border:1px solid rgba(239,68,68,.35); background:rgba(239,68,68,.12); color:#b91c1c; flex-wrap:wrap; }
.gmvmax-inline-error-text{ margin:0; color:#b91c1c; font-weight:600; }
.gmvmax-status-banner{ padding:10px 12px; border-radius:12px; border:1px solid var(--border); background:var(--panel-2); color:var(--muted); font-weight:600; }
.gmvmax-status-banner--muted{ color:var(--muted); }
.gmvmax-status-banner--success{ border-color:rgba(34,197,94,.35); background:rgba(34,197,94,.12); color:#166534; }
.gmvmax-status-banner--warning{ border-color:rgba(234,179,8,.45); background:rgba(234,179,8,.14); color:#854d0e; }
.gmvmax-status-banner--error{ border-color:rgba(239,68,68,.35); background:rgba(239,68,68,.12); color:#b91c1c; }
.gmvmax-error-card{ display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 16px; border-radius:14px; border:1px solid rgba(239,68,68,.35); background:rgba(239,68,68,.12); color:#b91c1c; flex-wrap:wrap; }
.gmvmax-error-card h3{ margin:0 0 4px; font-size:1rem; color:inherit; }
.gmvmax-error-card p{ margin:0; color:inherit; opacity:.85; }
.gmvmax-error{ padding:10px 12px; border-radius:12px; border:1px solid rgba(239,68,68,.35); background:rgba(239,68,68,.12); color:#b91c1c; font-weight:600; display:flex; align-items:center; gap:10px; }
.gmvmax-error__retry{ border:none; background:transparent; color:var(--accent); cursor:pointer; font-weight:600; padding:0; }
.gmvmax-error__retry:hover{ text-decoration:underline; }
.gmvmax-button{ display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:8px 16px; border-radius:10px; border:1px solid transparent; background:transparent; color:var(--txt); font-weight:600; cursor:pointer; min-height:var(--tap-min, 38px); transition:background .2s ease, color .2s ease, border-color .2s ease, filter .2s ease; }
.gmvmax-button:disabled{ opacity:.6; cursor:not-allowed; }
.gmvmax-button--primary{ background:var(--accent); border-color:var(--accent); color:#fff; }
.gmvmax-button--primary:hover:not(:disabled){ filter:brightness(1.05); }
.gmvmax-button--secondary{ background:var(--panel-2); border-color:var(--border); color:var(--txt); }
.gmvmax-button--secondary:hover:not(:disabled){ background:rgba(148,163,184,.16); }
.gmvmax-button--ghost{ border-color:var(--border); color:var(--muted); }
.gmvmax-button--ghost:hover:not(:disabled){ color:var(--txt); background:var(--panel-2); }
.gmvmax-button--danger{ background:rgba(248,113,113,.16); border-color:rgba(248,113,113,.6); color:#b91c1c; }
.gmvmax-button--danger:hover:not(:disabled){ background:rgba(248,113,113,.28); }
.gmvmax-button--link{ padding:0; border:none; background:transparent; color:var(--accent); min-height:auto; }
.gmvmax-button--link:hover{ text-decoration:underline; }
.gmvmax-product-table{ display:flex; flex-direction:column; gap:12px; }
.gmvmax-product-table__actions{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
.gmvmax-product-table__actions label{ display:inline-flex; align-items:center; gap:8px; font-weight:600; cursor:pointer; }
.gmvmax-product-table__count{ color:var(--muted); font-size:.95rem; }
.gmvmax-table{ width:100%; border-collapse:collapse; border:1px solid var(--border); border-radius:14px; overflow:hidden; background:var(--panel); }
.gmvmax-table thead{ background:var(--panel-2); }
.gmvmax-table th, .gmvmax-table td{ padding:10px 12px; text-align:left; border-bottom:1px solid var(--border); }
.gmvmax-table tbody tr:hover{ background:var(--panel-2); }
.gmvmax-table input[type="checkbox"]{ width:16px; height:16px; }
.gmvmax-product-cell{ display:flex; align-items:center; gap:12px; }
.gmvmax-product-thumb{ width:48px; height:48px; border-radius:12px; background:var(--panel-2); display:inline-flex; align-items:center; justify-content:center; overflow:hidden; }
img.gmvmax-product-thumb{ display:block; width:48px; height:48px; object-fit:cover; background:transparent; }
.gmvmax-product-thumb img{ width:100%; height:100%; object-fit:cover; }
.gmvmax-product-thumb--empty{ font-size:12px; color:var(--muted); }
.gmvmax-campaign-grid{ display:grid; gap:16px; grid-template-columns:repeat(auto-fit, minmax(260px, 1fr)); }
.gmvmax-campaign-card{ display:flex; flex-direction:column; gap:12px; border:1px solid var(--border); border-radius:16px; background:var(--panel-2); padding:16px; box-shadow:var(--shadow); }
.gmvmax-campaign-card__header{ display:flex; align-items:flex-start; justify-content:space-between; gap:12px; }
.gmvmax-campaign-card__title{ flex:1 1 auto; min-width:0; }
.gmvmax-campaign-card__header h3{ margin:0; font-size:1.05rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.gmvmax-campaign-card__status{ margin:2px 0 0; color:var(--muted); font-size:.95rem; }
.gmvmax-campaign-card__toggles{ display:flex; gap:8px; align-items:center; }
.gmvmax-toggle-button{ width:36px; height:36px; border-radius:10px; border:1px solid var(--border); background:var(--panel); display:inline-flex; align-items:center; justify-content:center; font-size:.95rem; cursor:pointer; transition:all .2s ease; }
.gmvmax-toggle-button:disabled{ opacity:.5; cursor:not-allowed; }
.gmvmax-toggle-button--active{ background:var(--accent); color:#fff; border-color:var(--accent); }
.gmvmax-campaign-card__action-error{ margin:0; color:#b91c1c; font-size:.85rem; }
.gmvmax-campaign-card__body{ display:grid; gap:12px; }
.gmvmax-campaign-card__stats{ display:grid; gap:12px; grid-template-columns:repeat(auto-fit, minmax(120px, 1fr)); }
.gmvmax-campaign-card__stats dt{ font-size:.85rem; color:var(--muted); font-weight:500; }
.gmvmax-campaign-card__stats dd{ margin:4px 0 0; font-weight:600; }
.gmvmax-campaign-card__footer{ display:flex; gap:10px; flex-wrap:wrap; }
.gmvmax-campaign-card__products{ display:flex; flex-direction:column; gap:8px; border:1px solid var(--border); border-radius:12px; padding:12px; background:var(--panel); }
.gmvmax-campaign-card__products-count{ display:flex; align-items:center; justify-content:space-between; font-size:.9rem; color:var(--muted); font-weight:600; }
.gmvmax-campaign-card__products-count strong{ color:var(--txt); font-size:1.05rem; }
.gmvmax-campaign-card__products-placeholder{ color:var(--muted); font-size:.9rem; }
.gmvmax-product-thumbnails{ display:flex; flex-wrap:wrap; gap:6px; }
.gmvmax-product-thumbnail{ width:40px; height:40px; border-radius:10px; border:1px solid var(--border); background:var(--panel-2); display:inline-flex; align-items:center; justify-content:center; font-size:.85rem; overflow:hidden; }
.gmvmax-product-thumbnail img{ width:100%; height:100%; object-fit:cover; display:block; }
.gmvmax-product-thumbnail--more{ background:var(--panel); color:var(--muted); font-weight:600; }
@keyframes m-pop{ from{transform:translateY(-4px); opacity:.6} to{transform:none; opacity:1} }
.menu::before{ content:""; position:absolute; right:16px; top:-6px; width:10px; height:10px; transform:rotate(45deg); background:var(--panel); border-left:1px solid var(--border); border-top:1px solid var(--border); }
.menu-header{ display:flex; align-items:center; gap:10px; padding:6px 8px 10px; border-bottom:1px solid var(--border); margin-bottom:6px; }
.avatar.lg{ width:32px; height:32px; font-size:13px; }
.email{ font-size:13px; font-weight:600; }
.menu-item{ width:100%; text-align:left; padding:10px; border-radius:10px; color:var(--txt); font-size:14px; background:transparent; border:none; display:flex; align-items:center; gap:8px; cursor:pointer; min-height: var(--tap-min); }
.menu-item:hover{ background:var(--sidebar-hover); }
.menu-sep{ height:1px; background:var(--border); margin:6px 0; }
.menu-item.danger{ color:#ff6b6b; }

/* ===== 登录页背景 ===== */
.auth-page{
  display:flex; min-height:100vh; align-items:center; justify-content:center;
  padding:16px; padding-bottom: calc(16px + var(--safe-bottom));
  background: linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,0)) var(--bg);
}
.auth-page .card{ width:min(560px, 92vw); }
.small-muted{ color:var(--muted); font-size:var(--fz-small); }

/* 密码强度条 */
.pw-bars{ display:grid; grid-template-columns:repeat(4,1fr); gap:6px; }
.pw-bar{ height:6px; border-radius:4px; background:var(--border); overflow:hidden; }
.pw-bar>i{ display:block; height:100%; width:0; transition:width .25s ease, background .2s ease; }
.pw-bar.on>i{ width:100%; }

/* ===== Markdown 文档 ===== */
.doc-body{ line-height:1.75; }
.doc-body h1,.doc-body h2,.doc-body h3{ margin:.8em 0 .4em; }
.doc-body p{ margin:.6em 0; text-indent:2em; }
.doc-body ul,.doc-body ol{ padding-left:1.2em; }
.doc-body a{ color:var(--accent); text-decoration:underline; }

/* 抖动动画（登录/初始化错误） */
@keyframes shake{
  10%,90%{ transform:translateX(-1px) }
  20%,80%{ transform:translateX(2px) }
  30%,50%,70%{ transform:translateX(-4px) }
  40%,60%{ transform:translateX(4px) }
}
.shake{ animation:shake .42s cubic-bezier(.36,.07,.19,.97) both }

/* 主题按钮（图标 + 文案） */
.theme-btn{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px;
  background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
  color:var(--txt); cursor:pointer; line-height:1;
}
:root[data-theme="light"] .theme-btn{
  background:rgba(0,0,0,.04); border-color:rgba(0,0,0,.08);
}
.theme-btn:hover{ opacity:.95; }
.theme-btn__text{ font-size:12px; }

/* 选中文本高亮 */
::selection{ background:rgba(145,202,255,.35); color:#0b1220; }
:root[data-theme="light"] ::selection{ background:rgba(37,99,235,.18); color:#111827; }

/* 深色主题下高亮文字颜色修正 */
.sidebar-link.active{ background:var(--sidebar-active); color:#111; }
@media (prefers-color-scheme: dark){
  :root:not([data-theme]) .sidebar-link.active{ color:#fff }
}
:root[data-theme="dark"] .sidebar-link.active{ color:#fff; }

/* ===== API 文档页 ===== */
.api-page{ height:100%; display:flex; flex-direction:column; min-height:0; }
.api-toolbar{ display:flex; gap:8px; }
.api-iframe{ width:100%; border:0; background:#fff; border-radius:12px; box-shadow:var(--shadow); }

/* ===== 响应式：<= 960px —— 移动端整页滚动（关键） ===== */
@media (max-width: 960px){
  .layout{
    padding-left: 0;
    height: auto;                                     /* 整页滚动 */
    min-height: calc(100svh - var(--topbar-h) - var(--footer-h));
  }
  .sidebar{
    position: sticky; top:var(--topbar-h); width:auto; height:auto; left:auto;
    border-right:none; border-bottom:1px solid var(--border);
    padding: 10px 8px;
  }
  .content{ height:auto; max-height:none; overflow:visible; padding:12px; } /* 页面本身滚动 */
  .card, .modal{ box-shadow:var(--shadow); }
}

/* 两列表单栅格，移动端自动折行 */
.form-grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
@media (max-width: 720px) { .form-grid { grid-template-columns: 1fr; } }

/* 分段控件（角色） */
.seg{
  display:inline-flex; align-items:center; gap:0;
  border:1px solid var(--border); background:var(--panel-2);
  border-radius:999px; overflow:hidden;
}
.seg > button{
  padding:6px 12px; background:transparent; border:0; cursor:pointer;
  color:var(--txt); font-weight:600; font-size:13px;
}
.seg > button.on{ background:var(--accent); color:#fff; }
.seg > button:disabled{ opacity:.6; cursor:not-allowed; }

/* 圆角开关 */
.switch{
  width:42px; height:24px; border-radius:999px; position:relative;
  background:var(--border); transition:background .18s ease; cursor:pointer;
}
.switch > i{
  position:absolute; top:2px; left:2px; width:20px; height:20px; border-radius:50%;
  background:#fff; transition:left .18s ease;
}
.switch.on{ background:#22c55e; }
.switch.on > i{ left:20px; }
.switch.disabled{ opacity:.5; cursor:not-allowed; }

/* 角标（中文角色） */
.badge-role{ display:inline-block; padding:3px 10px; border-radius:999px; color:#fff; font-size:12px; font-weight:700; }

/* 表格操作：同一行展示 */
.table-actions{ display:flex; align-items:center; gap:8px; flex-wrap:nowrap; }
.btn.sm{ padding:6px 10px; border-radius:8px; font-size:13px; }
.btn.danger{ background:#ef4444; }

/* ===== 视口高度优先级（仅桌面端使用固定高度） ===== */
@media (min-width: 961px){
  /* 1) 优先 100svh */
  @supports (height: 100svh){
    .layout  { height: calc(100svh - var(--topbar-h) - var(--footer-h)); }
    .sidebar { height: calc(100svh - var(--topbar-h) - var(--footer-h)); }
    .modal__body { max-height: 70svh; }
    .auth-page { min-height: 100svh; }
  }
  /* 2) 次选 100dvh */
  @supports not (height: 100svh) and (height: 100dvh){
    .layout  { height: calc(100dvh - var(--topbar-h) - var(--footer-h)); }
    .sidebar { height: calc(100dvh - var(--topbar-h) - var(--footer-h)); }
    .modal__body { max-height: 70dvh; }
    .auth-page { min-height: 100dvh; }
  }
  /* 3) 兜底 100vh */
  @supports not (height: 100svh) and not (height: 100dvh){
    .layout  { height: calc(100vh - var(--topbar-h) - var(--footer-h)); }
    .sidebar { height: calc(100vh - var(--topbar-h) - var(--footer-h)); }
    .modal__body { max-height: 70vh; }
    .auth-page { min-height: 100vh; }
  }
}

/* ===== 表格容器滚动（移动端友好） ===== */
.table-wrap { overflow:auto; -webkit-overflow-scrolling:touch; }
.table-wrap table { min-width: 720px; }
@media (max-width: 720px){ .table-wrap table { min-width: 620px; } }
/* 可选：操作列右侧吸附（给 th/td 加 .col-actions） */
@media (max-width: 720px){
  td.col-actions, th.col-actions{
    position: sticky; right:0; background: var(--panel);
    box-shadow: -4px 0 8px rgba(0,0,0,.06);
  }
}

/* ===== 顶栏/页脚在小屏更紧凑 ===== */
@media (max-width: 480px){
  :root { --topbar-h: 52px; }
  .topbar { padding: 0 calc(12px + var(--safe-right)) 0 calc(12px + var(--safe-left)); }
  .footer { flex-wrap: wrap; gap: 8px; row-gap: 2px; }
  .footer a { font-size: var(--fz-small); }
}

/* ===== 降噪与可达性 ===== */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; }
  .shake{ animation:none !important; }
}

/* ===== OAuth 应用页表格 ===== */
.oauth-table{ width:100%; border-collapse:collapse; }

/* ===== 预留抽屉侧边栏（暂不启用） ===== */
@media (max-width: 960px){
  .sidebar.drawer{
    position: fixed; inset: var(--topbar-h) 0 auto 0;
    height: calc(100svh - var(--topbar-h));
    max-width: 86vw; transform: translateX(-100%);
    transition: transform .18s ease-out;
    box-shadow: var(--shadow-lg); z-index: 1200;
  }
  .sidebar.drawer-open{ transform: translateX(0); }
}

/* ===== 移动端兜底，确保整页自然滚动（防止其它样式覆盖） ===== */
@media (max-width: 960px){
  .layout  { height: auto !important; min-height: calc(100svh - var(--topbar-h) - var(--footer-h)); }
  .sidebar { height: auto !important; }
  .content.no-scroll { overflow: visible !important; } /* ApiDocs iframe 页面在移动端允许页面滚动 */
}


/* ===== TikTok Business Overview ===== */
.account-overview{ padding:16px; display:grid; gap:18px; }
.account-overview .toast{ position:fixed; top:80px; right:32px; z-index:1200; }

.overview-toolbar{
  position:sticky;
  top:0;
  z-index:100;
  display:grid;
  gap:12px;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  box-shadow:var(--shadow);
}
.overview-toolbar__title{ font-size:1.25rem; font-weight:700; }
.overview-toolbar__info{ display:flex; flex-wrap:wrap; gap:12px; font-size:.85rem; color:var(--muted); }
.overview-toolbar__filters{ display:flex; flex-wrap:wrap; gap:16px; align-items:flex-end; }
.filter-field{ display:grid; gap:6px; min-width:160px; }
.filter-label{ font-size:.8rem; color:var(--muted); }
.overview-toolbar__actions{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
.overview-toolbar__scope{ min-width:140px; }
.overview-warning{ color:var(--warn); font-size:.85rem; }
.overview-guard{ border:1px dashed rgba(245,158,11,.4); background:rgba(245,158,11,.08); color:var(--warn); padding:10px 12px; border-radius:10px; font-size:.9rem; margin-bottom:8px; }

.overview-panels{ display:grid; gap:18px; }
.overview-panel{ border:1px solid var(--border); border-radius:16px; background:var(--panel); box-shadow:var(--shadow); }
.overview-panel__header{
  width:100%;
  background:transparent;
  border:none;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 18px;
  border-radius:16px;
  cursor:pointer;
  color:inherit;
  font-size:1rem;
}
.overview-panel__header:hover{ background:var(--sidebar-hover); }
.overview-panel__title{ display:flex; align-items:center; gap:6px; font-weight:600; }
.overview-panel__count{ font-size:.85rem; color:var(--muted); }
.overview-panel__chevron{ transition:transform .18s ease; }
.overview-panel__chevron.open{ transform:rotate(180deg); }
.overview-panel__body{ padding:16px; display:grid; gap:14px; }
.overview-panel.collapsed .overview-panel__body{ display:none; }

.overview-table-wrap{ overflow:auto; border-radius:12px; border:1px solid var(--border); }
.overview-table{ width:100%; border-collapse:collapse; min-width:720px; }
.overview-table th,
.overview-table td{ padding:10px 12px; border-bottom:1px solid var(--border); text-align:left; font-size:.9rem; }
.overview-table thead th{ background:var(--panel-2); font-weight:600; }
.overview-table tbody tr:hover{ background:var(--sidebar-hover); }

.overview-pagination{ display:flex; flex-wrap:wrap; justify-content:space-between; gap:12px; font-size:.85rem; color:var(--muted); }
.overview-pagination__controls{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }

.skeleton-list{ display:grid; gap:10px; }
.skeleton-line{ height:14px; border-radius:999px; background:linear-gradient(90deg, rgba(255,255,255,.08), rgba(255,255,255,.15), rgba(255,255,255,.08)); animation:skeleton 1.4s ease infinite; }
@keyframes skeleton{ 0%{ background-position:-160px 0; } 100%{ background-position:160px 0; } }

.overview-state{ display:grid; gap:12px; padding:16px; border-radius:12px; border:1px dashed var(--border); align-items:flex-start; }
.overview-state--error{ border-color:rgba(239,68,68,.6); }
.overview-state__message{ font-size:.95rem; }
.overview-hints{ margin:0; padding-left:18px; display:grid; gap:6px; font-size:.85rem; color:var(--muted); }

.copy-btn{ border:1px solid var(--border); background:transparent; color:var(--txt); border-radius:8px; padding:4px 10px; cursor:pointer; font-size:.75rem; }
.copy-btn:hover{ background:var(--sidebar-hover); }
.copy-btn[disabled]{ opacity:.5; cursor:not-allowed; }
.copy-btn--lg{ padding:6px 14px; font-size:.85rem; }

.sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

.badge{ display:inline-flex; align-items:center; gap:4px; padding:2px 6px; border-radius:999px; font-size:.75rem; margin-left:6px; }
.badge--pending{ background:rgba(148,163,184,.18); color:var(--muted); border:1px solid rgba(148,163,184,.25); }

.modal--wide{ width:min(880px, 92vw); }
.overview-run__summary{ display:grid; gap:6px; font-size:.9rem; color:var(--muted); }
.overview-run__counts{ display:grid; gap:10px; grid-template-columns:repeat(auto-fit, minmax(180px, 1fr)); }
.overview-run__card{ border:1px solid var(--border); border-radius:12px; padding:10px; display:grid; gap:6px; }
.overview-run__scope{ font-weight:600; }
.overview-run__numbers{ display:grid; gap:4px; font-size:.85rem; color:var(--muted); }
.overview-run__errors{ display:grid; gap:10px; }

.toast{ background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:10px 14px; box-shadow:var(--shadow-lg); }
.toast--info{ border-color:var(--border); }
.toast--success{ border-color:rgba(34,197,94,.6); }
.toast--error{ border-color:rgba(239,68,68,.6); }
.toast--warn{ border-color:rgba(245,158,11,.6); }
